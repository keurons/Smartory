<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Purchase order listing</title>
    </head>
    <body>

        <script type="text/javascript" src="/js/d3/d3.js" >
        </script>
        <script>

/*            function draw (data){
                d3.select("body")
                        .selectAll("li")
                        .data(data)
                        .enter()
                        .append("li")
                        .text(function (d){
                            return d.po + " " + d.qty;
                        });
            }*/

            d3.json("/data/data.json", draw);

            function draw (data){

                var w = 1000, h = 500, r = 8;

                var xScale = d3.scale.linear()
                            .domain([d3.min(data, function(d){return noOfMonths(d.date);}),
                                     d3.max(data, function(d){return noOfMonths(d.date);})])
                            .range([0.05 * w, w * 0.95]);

                var svg = d3.select("body")
                            .append("svg")
                            .attr({
                                    width: w,
                                    height: h
                            });

                 svg.selectAll("circle")
                         .data(data)
                         .enter()
                         .append("circle")
                         .attr("cx", function(d){
                                return xScale(noOfMonths(d.date));
                         })
                         .attr("cy", h/2)
                         .attr("r", r)
                         .attr("fill", "green")
                         .attr("stroke", "black")
                         .attr("stroke-width", r/4);

                svg.selectAll("text")
                         .data(data)
                         .enter()
                         .append("text")
                         .text(function(d){return d.date})
                        .attr({
                                x: function(d){return xScale(noOfMonths(d.date));},
                                y: h/2,
                                "font-size": "9px",
                                "font-family": "sans-serif",
                                "fill": "red"
                        });
            }

            function noOfMonths(dt){
                return (Date.parse(dt)/1000)/2592000;
            }

        </script>
    </body>
</html>